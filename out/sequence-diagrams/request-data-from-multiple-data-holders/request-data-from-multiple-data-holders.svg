<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1778px" preserveAspectRatio="none" style="width:2071px;height:1778px;background:#FFFFFF;" version="1.1" viewBox="0 0 2071 1778" width="2071px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="1759.1895" style="stroke:#181818;stroke-width:0.5;" width="967" x="21" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="67" x="471" y="18.5684">data_user</text><rect fill="#DDDDDD" height="1759.1895" style="stroke:#181818;stroke-width:0.5;" width="812.5" x="1166" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81" x="1531.75" y="18.5684">data_holder</text><rect fill="#FFFFFF" height="1489.8379" style="stroke:#181818;stroke-width:1.0;" width="10" x="330.5" y="263.3516"/><rect fill="#FFFFFF" height="93.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="898.5" y="1086.3574"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1253" y="1285.5313"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1253" y="1550.3262"/><rect fill="#FFFFFF" height="204.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1715" y="1240.9102"/><rect fill="#FFFFFF" height="204.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1715" y="1505.7051"/><rect fill="none" height="312.1055" style="stroke:#000000;stroke-width:1.5;" width="746.5" x="257.5" y="320.6621"/><rect fill="#FFC0CB" height="133.5527" style="stroke:#000000;stroke-width:1.5;" width="726.5" x="267.5" y="344.9727"/><rect fill="#ADD8E6" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="597" x="267.5" y="492.5254"/><rect fill="#FFFFE0" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="504" x="267.5" y="566.1465"/><rect fill="none" height="1078.1113" style="stroke:#000000;stroke-width:1.5;" width="1807" x="247.5" y="646.7676"/><rect fill="none" height="332.0371" style="stroke:#000000;stroke-width:1.5;" width="746.5" x="257.5" y="671.0781"/><rect fill="#FFC0CB" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="636" x="267.5" y="695.3887"/><rect fill="#ADD8E6" height="106.5527" style="stroke:#000000;stroke-width:1.5;" width="726.5" x="267.5" y="769.0098"/><rect fill="#FFFFE0" height="106.5527" style="stroke:#000000;stroke-width:1.5;" width="726.5" x="267.5" y="889.5625"/><rect fill="none" height="171.1738" style="stroke:#000000;stroke-width:1.5;" width="1777" x="267.5" y="1017.1152"/><rect fill="none" height="250.7949" style="stroke:#000000;stroke-width:1.5;" width="1717" x="267.5" y="1202.2891"/><rect fill="none" height="250.7949" style="stroke:#000000;stroke-width:1.5;" width="1717" x="267.5" y="1467.084"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="43" x2="43" y1="101.7988" y2="1771.1895"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="335.5" x2="335.5" y1="101.7988" y2="1771.1895"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="903" x2="903" y1="101.7988" y2="1771.1895"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1077" x2="1077" y1="101.7988" y2="1771.1895"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1258" x2="1258" y1="101.7988" y2="1771.1895"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1720" x2="1720" y1="101.7988" y2="1771.1895"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1884.5" x2="1884.5" y1="101.7988" y2="1771.1895"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2019.5" x2="2019.5" y1="101.7988" y2="1771.1895"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="25" y="98.8457">User</text><ellipse cx="43.5" cy="33.8105" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M43.5,41.8105 L43.5,68.8105 M30.5,49.8105 L56.5,49.8105 M43.5,68.8105 L30.5,83.8105 M43.5,68.8105 L56.5,83.8105 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="277.5" y="70.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="284.5" y="90.8457">App_data_user</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="161" x="823" y="70.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="830" y="90.8457">Nuts_node_data_user</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="1014" y="98.8457">Discovery_Service</text><ellipse cx="1077" cy="33.8105" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M1077,41.8105 L1077,68.8105 M1064,49.8105 L1090,49.8105 M1077,68.8105 L1064,83.8105 M1077,68.8105 L1090,83.8105 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="176" x="1170" y="70.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="1177" y="90.8457">Nuts_node_data_holder</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="1675" y="70.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="1682" y="90.8457">AAA_Proxy</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="179" x="1795.5" y="70.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="1802.5" y="90.8457">Fhir_server_data_holder</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="30" x="2004.5" y="70.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="2011.5" y="90.8457">sn</text><rect fill="#FFFFFF" height="1489.8379" style="stroke:#181818;stroke-width:1.0;" width="10" x="330.5" y="263.3516"/><rect fill="#FFFFFF" height="93.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="898.5" y="1086.3574"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1253" y="1285.5313"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1253" y="1550.3262"/><rect fill="#FFFFFF" height="204.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1715" y="1240.9102"/><rect fill="#FFFFFF" height="204.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1715" y="1505.7051"/><polygon fill="#181818" points="323.5,129.1094,333.5,133.1094,323.5,137.1094,327.5,133.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="43.5" x2="329.5" y1="133.1094" y2="133.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="50.5" y="128.3672">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="63.5" y="128.3672">Log in</text><line style="stroke:#181818;stroke-width:1.0;" x1="335.5" x2="377.5" y1="177.7305" y2="177.7305"/><line style="stroke:#181818;stroke-width:1.0;" x1="377.5" x2="377.5" y1="177.7305" y2="190.7305"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="377.5" y1="190.7305" y2="190.7305"/><polygon fill="#181818" points="346.5,186.7305,336.5,190.7305,346.5,194.7305,342.5,190.7305" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="342.5" y="165.333">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="355.5" y="157.6777">Create User session,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="337" x="355.5" y="172.9883">User info needed for NutsEmployeeCredential (step 7)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2064.5" x="0" y="219.3857"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2064.5" y1="219.3857" y2="219.3857"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2064.5" y1="222.3857" y2="222.3857"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="159" x="952.75" y="208.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141" x="958.75" y="225.2988">Later in User session</text><polygon fill="#181818" points="318.5,259.3516,328.5,263.3516,318.5,267.3516,322.5,263.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="43.5" x2="324.5" y1="263.3516" y2="263.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="50.5" y="258.6094">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="63.5" y="258.6094">GP request ACP information for Patient X</text><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="382.5" y1="292.6621" y2="292.6621"/><line style="stroke:#181818;stroke-width:1.0;" x1="382.5" x2="382.5" y1="292.6621" y2="305.6621"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="382.5" y1="305.6621" y2="305.6621"/><polygon fill="#181818" points="351.5,301.6621,341.5,305.6621,351.5,309.6621,347.5,305.6621" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="347.5" y="287.9199">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="360.5" y="287.9199">Resolve Patient BSN</text><path d="M257.5,320.6621 L387.5,320.6621 L387.5,327.9727 L377.5,337.9727 L257.5,337.9727 L257.5,320.6621 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="312.1055" style="stroke:#000000;stroke-width:1.5;" width="746.5" x="257.5" y="320.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="85" x="272.5" y="334.2305">localize data</text><path d="M267.5,344.9727 L724.5,344.9727 L724.5,352.2832 L714.5,362.2832 L267.5,362.2832 L267.5,344.9727 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="133.5527" style="stroke:#000000;stroke-width:1.5;" width="726.5" x="267.5" y="344.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="412" x="282.5" y="358.541">option 1: localize and find addresses using Discovery Service</text><polygon fill="#181818" points="891.5,394.9043,901.5,398.9043,891.5,402.9043,895.5,398.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="897.5" y1="398.9043" y2="398.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="347.5" y="386.5068">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317" x="360.5" y="378.8516">Find all organizations that support the pzp service</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="360.5" y="394.1621">Get /internal/discovery/v1/pzp</text><polygon fill="#181818" points="351.5,424.2148,341.5,428.2148,351.5,432.2148,347.5,428.2148" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="345.5" x2="902.5" y1="428.2148" y2="428.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="357.5" y="423.4727">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="366" x="370.5" y="423.4727">array of presentations of all orgnizations that support pzp</text><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="382.5" y1="457.5254" y2="457.5254"/><line style="stroke:#181818;stroke-width:1.0;" x1="382.5" x2="382.5" y1="457.5254" y2="470.5254"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="382.5" y1="470.5254" y2="470.5254"/><polygon fill="#181818" points="351.5,466.5254,341.5,470.5254,351.5,474.5254,347.5,470.5254" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="347.5" y="452.7832">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="360.5" y="452.7832">store array "ArrayOfPresentations"</text><path d="M267.5,492.5254 L859.5,492.5254 L859.5,499.8359 L849.5,509.8359 L267.5,509.8359 L267.5,492.5254 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="597" x="267.5" y="492.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="547" x="282.5" y="506.0938">option 2: localize using a local CareTeam, find addresses using Discovery Service</text><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="382.5" y1="531.1465" y2="531.1465"/><line style="stroke:#181818;stroke-width:1.0;" x1="382.5" x2="382.5" y1="531.1465" y2="544.1465"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="382.5" y1="544.1465" y2="544.1465"/><polygon fill="#181818" points="351.5,540.1465,341.5,544.1465,351.5,548.1465,347.5,544.1465" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="347.5" y="526.4043">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="360.5" y="526.4043">get local CareTeam FHIR-resource of Patient X</text><path d="M267.5,566.1465 L766.5,566.1465 L766.5,573.457 L756.5,583.457 L267.5,583.457 L267.5,566.1465 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="504" x="267.5" y="566.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="454" x="282.5" y="579.7148">option 3: localize using NVI, find addresses using Discovery Service</text><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="382.5" y1="604.7676" y2="604.7676"/><line style="stroke:#181818;stroke-width:1.0;" x1="382.5" x2="382.5" y1="604.7676" y2="617.7676"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="382.5" y1="617.7676" y2="617.7676"/><polygon fill="#181818" points="351.5,613.7676,341.5,617.7676,351.5,621.7676,347.5,617.7676" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="347.5" y="600.0254">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="360.5" y="600.0254">to do</text><path d="M247.5,646.7676 L321.5,646.7676 L321.5,654.0781 L311.5,664.0781 L247.5,664.0781 L247.5,646.7676 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1078.1113" style="stroke:#000000;stroke-width:1.5;" width="1807" x="247.5" y="646.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="262.5" y="660.3359">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="158" x="336.5" y="659.4023">[for each found data holder]</text><path d="M257.5,671.0781 L462.5,671.0781 L462.5,678.3887 L452.5,688.3887 L257.5,688.3887 L257.5,671.0781 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="332.0371" style="stroke:#000000;stroke-width:1.5;" width="746.5" x="257.5" y="671.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="160" x="272.5" y="684.6465">get endpoint addresses</text><path d="M267.5,695.3887 L724.5,695.3887 L724.5,702.6992 L714.5,712.6992 L267.5,712.6992 L267.5,695.3887 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="636" x="267.5" y="695.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="412" x="282.5" y="708.957">option 1: localize and find addresses using Discovery Service</text><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="382.5" y1="734.0098" y2="734.0098"/><line style="stroke:#181818;stroke-width:1.0;" x1="382.5" x2="382.5" y1="734.0098" y2="747.0098"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="382.5" y1="747.0098" y2="747.0098"/><polygon fill="#181818" points="351.5,743.0098,341.5,747.0098,351.5,751.0098,347.5,747.0098" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="347.5" y="729.2676">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="522" x="369.5" y="729.2676">get the FHIR-endpoint address from the array "ArrayOfPresentations", filter on URA</text><path d="M267.5,769.0098 L859.5,769.0098 L859.5,776.3203 L849.5,786.3203 L267.5,786.3203 L267.5,769.0098 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="106.5527" style="stroke:#000000;stroke-width:1.5;" width="726.5" x="267.5" y="769.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="547" x="282.5" y="782.5781">option 2: localize using a local CareTeam, find addresses using Discovery Service</text><polygon fill="#181818" points="891.5,834.252,901.5,838.252,891.5,842.252,895.5,838.252" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="897.5" y1="838.252" y2="838.252"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="347.5" y="818.1992">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="369.5" y="802.8887">Get organization details by URA</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="369.5" y="818.1992">GET /internal/discovery/v1/pzp</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="406" x="369.5" y="833.5098">payload { id_uzicert_x509credential.organization_ura = &lt;URA&gt; }</text><polygon fill="#181818" points="351.5,863.5625,341.5,867.5625,351.5,871.5625,347.5,867.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="345.5" x2="902.5" y1="867.5625" y2="867.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="357.5" y="862.8203">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="464" x="379.5" y="862.8203">presentation that includes subject-id, authz-server-url and fhir-base-url</text><path d="M267.5,889.5625 L766.5,889.5625 L766.5,896.873 L756.5,906.873 L267.5,906.873 L267.5,889.5625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="106.5527" style="stroke:#000000;stroke-width:1.5;" width="726.5" x="267.5" y="889.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="454" x="282.5" y="903.1309">option 3: localize using NVI, find addresses using Discovery Service</text><polygon fill="#181818" points="891.5,954.8047,901.5,958.8047,891.5,962.8047,895.5,958.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="897.5" y1="958.8047" y2="958.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="347.5" y="938.752">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="369.5" y="923.4414">Get organization details by URA</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="369.5" y="938.752">GET /internal/discovery/v1/pzp</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="406" x="369.5" y="954.0625">payload { id_uzicert_x509credential.organization_ura = &lt;URA&gt; }</text><polygon fill="#181818" points="351.5,984.1152,341.5,988.1152,351.5,992.1152,347.5,988.1152" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="345.5" x2="902.5" y1="988.1152" y2="988.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="357.5" y="983.373">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="491" x="379.5" y="983.373">presentation that includes subject-id, authz-server-url and and fhir-base-url</text><path d="M267.5,1017.1152 L424.5,1017.1152 L424.5,1024.4258 L414.5,1034.4258 L267.5,1034.4258 L267.5,1017.1152 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="171.1738" style="stroke:#000000;stroke-width:1.5;" width="1777" x="267.5" y="1017.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="282.5" y="1030.6836">get access token</text><polygon fill="#181818" points="886.5,1082.3574,896.5,1086.3574,886.5,1090.3574,890.5,1086.3574" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="892.5" y1="1086.3574" y2="1086.3574"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="347.5" y="1066.3047">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="369.5" y="1050.9941">Get access token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="423" x="369.5" y="1066.3047">POST /internal/auth/v2/{subjectID}/request-service-access-token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="290" x="369.5" y="1081.6152">use subject-id, authz-server-url found earlier</text><polygon fill="#181818" points="919.5,1111.668,909.5,1115.668,919.5,1119.668,915.5,1115.668" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2007.5,1111.668,2017.5,1115.668,2007.5,1119.668,2011.5,1115.668" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="913.5" x2="2013.5" y1="1115.668" y2="1115.668"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="925.5" y="1110.9258">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="257" x="947.5" y="1110.9258">nuts-nodes handle access token request</text><path d="M913,1128.668 L913,1153.668 L1248,1153.668 L1248,1138.668 L1238,1128.668 L913,1128.668 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1238,1128.668 L1238,1138.668 L1248,1138.668 L1238,1128.668 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="314" x="919" y="1146.2363">uses X509Credential and NutsEmployeeCredential</text><polygon fill="#181818" points="351.5,1176.2891,341.5,1180.2891,351.5,1184.2891,347.5,1180.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="345.5" x2="902.5" y1="1180.2891" y2="1180.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="357.5" y="1175.5469">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="379.5" y="1175.5469">Access token</text><path d="M267.5,1202.2891 L435.5,1202.2891 L435.5,1209.5996 L425.5,1219.5996 L267.5,1219.5996 L267.5,1202.2891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="250.7949" style="stroke:#000000;stroke-width:1.5;" width="1717" x="267.5" y="1202.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="123" x="282.5" y="1215.8574">get Patient by bsn</text><polygon fill="#181818" points="1703,1236.9102,1713,1240.9102,1703,1244.9102,1707,1240.9102" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="1709" y1="1240.9102" y2="1240.9102"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="347.5" y="1236.168">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="369.5" y="1236.168">POST /fhir/Patient/_search</text><polygon fill="#181818" points="1274,1281.5313,1264,1285.5313,1274,1289.5313,1270,1285.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1268" x2="1714" y1="1285.5313" y2="1285.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1280" y="1273.1338">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="1302" y="1265.4785">introspect access token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304" x="1302" y="1280.7891">POST /internal/auth/v2/accesstoken/introspect</text><polygon fill="#181818" points="1703,1310.8418,1713,1314.8418,1703,1318.8418,1707,1314.8418" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1258" x2="1709" y1="1314.8418" y2="1314.8418"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1265" y="1310.0996">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="406" x="1287" y="1310.0996">valid token + URA of data_user + USER{name,userRole,identifier}</text><line style="stroke:#181818;stroke-width:1.0;" x1="1725" x2="1767" y1="1344.1523" y2="1344.1523"/><line style="stroke:#181818;stroke-width:1.0;" x1="1767" x2="1767" y1="1344.1523" y2="1357.1523"/><line style="stroke:#181818;stroke-width:1.0;" x1="1726" x2="1767" y1="1357.1523" y2="1357.1523"/><polygon fill="#181818" points="1736,1353.1523,1726,1357.1523,1736,1361.1523,1732,1357.1523" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1732" y="1339.4102">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="1754" y="1339.4102">Authorization</text><polygon fill="#181818" points="1873,1382.4629,1883,1386.4629,1873,1390.4629,1877,1386.4629" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1725" x2="1879" y1="1386.4629" y2="1386.4629"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1732" y="1381.7207">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1754" y="1381.7207">forward request</text><polygon fill="#181818" points="1736,1411.7734,1726,1415.7734,1736,1419.7734,1732,1415.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1730" x2="1884" y1="1415.7734" y2="1415.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1742" y="1411.0313">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="1764" y="1411.0313">Patient-resource</text><polygon fill="#181818" points="351.5,1441.084,341.5,1445.084,351.5,1449.084,347.5,1445.084" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="345.5" x2="1719" y1="1445.084" y2="1445.084"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="357.5" y="1440.3418">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="379.5" y="1440.3418">forward Patient-resource</text><path d="M267.5,1467.084 L623.5,1467.084 L623.5,1474.3945 L613.5,1484.3945 L267.5,1484.3945 L267.5,1467.084 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="250.7949" style="stroke:#000000;stroke-width:1.5;" width="1717" x="267.5" y="1467.084"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="311" x="282.5" y="1480.6523">get TreatmentDirective2 by Patient-reference</text><polygon fill="#181818" points="1703,1501.7051,1713,1505.7051,1703,1509.7051,1707,1505.7051" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="340.5" x2="1709" y1="1505.7051" y2="1505.7051"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="347.5" y="1500.9629">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="305" x="369.5" y="1500.9629">GET /fhir/Consent?patient=&lt;patient-reference&gt;</text><polygon fill="#181818" points="1274,1546.3262,1264,1550.3262,1274,1554.3262,1270,1550.3262" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1268" x2="1714" y1="1550.3262" y2="1550.3262"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1280" y="1537.9287">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="1302" y="1530.2734">introspect access token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304" x="1302" y="1545.584">POST /internal/auth/v2/accesstoken/introspect</text><polygon fill="#181818" points="1703,1575.6367,1713,1579.6367,1703,1583.6367,1707,1579.6367" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1258" x2="1709" y1="1579.6367" y2="1579.6367"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1265" y="1574.8945">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="406" x="1287" y="1574.8945">valid token + URA of data_user + USER{name,userRole,identifier}</text><line style="stroke:#181818;stroke-width:1.0;" x1="1725" x2="1767" y1="1608.9473" y2="1608.9473"/><line style="stroke:#181818;stroke-width:1.0;" x1="1767" x2="1767" y1="1608.9473" y2="1621.9473"/><line style="stroke:#181818;stroke-width:1.0;" x1="1726" x2="1767" y1="1621.9473" y2="1621.9473"/><polygon fill="#181818" points="1736,1617.9473,1726,1621.9473,1736,1625.9473,1732,1621.9473" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1732" y="1604.2051">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="1754" y="1604.2051">Authorization</text><polygon fill="#181818" points="1873,1647.2578,1883,1651.2578,1873,1655.2578,1877,1651.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1725" x2="1879" y1="1651.2578" y2="1651.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1732" y="1646.5156">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1754" y="1646.5156">forward request</text><polygon fill="#181818" points="1736,1676.5684,1726,1680.5684,1736,1684.5684,1732,1680.5684" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1730" x2="1884" y1="1680.5684" y2="1680.5684"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1742" y="1675.8262">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="1764" y="1675.8262">Consent-resource</text><polygon fill="#181818" points="351.5,1705.8789,341.5,1709.8789,351.5,1713.8789,347.5,1709.8789" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="345.5" x2="1719" y1="1709.8789" y2="1709.8789"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="357.5" y="1705.1367">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="379.5" y="1705.1367">forward Consent-resource</text><polygon fill="#181818" points="54.5,1749.1895,44.5,1753.1895,54.5,1757.1895,50.5,1753.1895" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="48.5" x2="334.5" y1="1753.1895" y2="1753.1895"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="60.5" y="1748.4473">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="82.5" y="1748.4473">Display data</text><!--SRC=[xLXPRzj647xdhnYaBoqgLecBegXWgL1yf0OCHv3j8WK222jo96szscLtbueb8_-zipn4KZoiDasVp0URt6EkxvlPMQruYB1GoixLeyTYgsIydgFsp0EN4TDi3M_LuuI58PTBE7djURGEGcRPB3QqZ0LMQRXthxJQye17J5eOHz6iM5IUkOcjcKaLOcaUPGXEVIRjd9j0RL1lPxUeDpp0ajAL4c6tn8OLu_5uDj7gSLiPlLnnFIFrfAcoCxV6EGN-gEeB3E1QBO5BhphSiEvC8xEOn0OC6iELxC57cNnpkL0W4KCCAVWwyU5Y7GcrHQHz8KhBcO1lZSK8VlxEyuP3k2PfRcT58Wo7NgkbxoQWyQyO3ONWR98erMjctJQdT4Alf0W-kBZpZJEsYXlGq-tc0APebDZWNjZRsnilsRZKAev0g809liC4lMIycFicul81L9GOz6PGh6M4m8BJ7wAT9Z_HG6mS__RCW9mPK7fgfZPmRG2NYM0XGEabatoNnCE0NJ4B9euYfIrz84Ix24ogXL1xXnRwN182aeb-cDlHtxpfqyAA6GrQmQy7ZcdDjg0M496B5BdC3Xh8Z6knxL1THMnTZQ6CmapPgx7xztunAMjyjPVcY9yWunq29VXoPUSYnXojan9QAJGi7O0pfl4EsRhtdo1uuCoIKAYgWSlVhgO-gL2n9g0eUWMhd_Vhsldr1mgXFkMU_LZpxERtgoztnXyTk68LXAh1n0Q3XL9Hah38WXMzn3Jj945MiAfEkHYHW4WHMmkBAvPzdVGxWepEDfTR2MY7Hi92gtKotSLM1uLmXP2Clf-EAnPKevW_JQx_NuG-lYov0bEkI12YPLmOc6-Tdwu4NTnrb21Q4B6jK2o49-3XBDwHBThE7dzw_KkmFr5-AAkOnPh144v9_0W-r-m-iewLorTQgRWCH1nIX4my_nC3w_Em1zHQh7P-UjpwiHOfo-W8zkVCe1jfWR89lg-Qjo-OTM9sB6xFLbzN35WGkCotwW5bBLUF1w4YvgESlByjXzsvqT-Sz9yotwxEF_UpliZFJdW_bU3d4aXqToJIAenC2rwgmExPzr9DdUunU9qwm8oa_atIhEzc3Qmex0AhZcO-r8HAHTgrIn5t7ZQf650YaD0FnBDIj-cGRMv4_ntFICsuP6z5I8X7nQcJFFb9JzasD_APHYA_0WmWPOUZS3-JqATh0DF1gXd7ulPGgnBvJ0CvqxEPGa0qrCf4nAGAUgqiJHSbQ_h5tfhkjl0Tz0GTeAKh2RN2ZG5ig8A66R- -JueOKQY890tTNaoV95jZpmrCbS0UJrYoe4Ie5wHsd5iChSIqXDgOmgDqLWNRT_cZbclTm7LGdvWEMzEcPMCvG8ESS_kEiyl-UjtDJUYKKWfPdNgT2N7dRfnh4dpEDJePUEAIez2sG8tosPwxy3Ovlf9CEQFUYsJy6gMoXgVHeT3HI_QyPCypsPEnw0kpfrFAFyaUz-akLzw-zQZUN_pHVNgCKSCO2RgI93zYb3LKVYxv6m00]--></g></svg>